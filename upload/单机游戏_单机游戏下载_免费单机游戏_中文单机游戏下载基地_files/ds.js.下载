window.lzslot = {
    loadUrl: 'https://sp.yaoyl.com/api/v1/slot',
    isBaiduCmLoad: false,
    async: true,
    asyncSlots: [],
    rsyncSlots: [],
    preloadSlots: [],
    // 异步
    fill: function (id) {
        var container =  this.initContainer(id);
       
        this.asyncSlots.push({id: id, container: container});

        // 处理预加载
        if (typeof this.preloadSlots[id] !== 'undefined') document.write(this.preloadSlots[id]);
    },
    // 同步
    fillRsync: function (id) {
        var container =  this.initContainer(id);

        this.rsyncSlots.push({id: id, container: container, wait: true});
        if (this.isBaiduCmLoad) this.rsyncRun();

        // 处理预加载
        if (typeof this.preloadSlots[id] !== 'undefined') document.write(this.preloadSlots[id]);
    },
    initContainer: function (id) {
        var container =  'lz_' + Math.random().toString(36).slice(2);
        document.write('<div id="' + container + '"></div>');

        return container;
    },
    // 同步执行
    rsyncRun: function() {
        if (this.rsyncSlots.length > 0) {
            var slotIds = [];
            for (var i in this.rsyncSlots) {
                if (this.rsyncSlots[i].wait == true) {
                    slotIds.push(this.rsyncSlots[i].id);
                    this.rsyncSlots[i].wait = false;
                }
            }

            if (slotIds.length > 0) {
                $.ajax({
                    url: this.loadUrl + '/' + slotIds.join(','),
                    dataType:'jsonp',
                    jsonpCallback: 'lzslot.rsyncCallback'
                });
            }
        }
    },
    // 异步执行
    asyncRun: function() {
        var slots = this.asyncSlots;
        if (slots.length > 0) {
            var slotIds = [];
            for (var i in slots) {
                slotIds.push(slots[i].id);
            }

            if (slotIds.length > 0) {
                $.ajax({
                    url: this.loadUrl + '/' + slotIds.join(','),
                    dataType:'jsonp',
                    jsonpCallback: 'lzslot.asyncCallback'
                });
            }
        }
    },
    // 处理同步返回
    rsyncCallback: function(json) {
        var slots = this.rsyncSlots;
        for (var key in slots) {
            slotId = slots[key].id;
            if (typeof json[slotId] !== 'undefined') {
                var code = this.fixBaiduSlot(json[slotId], slots[key].container);
                $('#' + slots[key].container).html(code);
            }
        }
    },
    // 处理异步返回
    asyncCallback: function(json) {
        var slots = this.asyncSlots;
        for (var key in slots) {
            slotId = slots[key].id;
            if (typeof json[slotId] !== 'undefined') {
                var code = this.fixBaiduSlot(json[slotId], slots[key].container);
                $('#' + slots[key].container).html(code);
            }
        }
    },
    // 修复百度广告代码
    fixBaiduSlot: function(code, container) {
        return code.replace('@#bd#@', container);
    },
    // 初始化
    init: function() {
        // 加载百度广告解析JS
        // 移动端不加载
        var hostArr = location.host.split('.');
        if (hostArr[0] == 'm' || hostArr[0] == 'wap') {
            lzslot.isBaiduCmLoad = true;
        } else {
            this.loadScript('https://cpro.baidustatic.com/cpro/ui/cm.js', function() {
                for (var i in lzslot.rsyncSlots) {
                    if (lzslot.rsyncSlots[i].wait == true) {
                        lzslot.rsyncRun();
                    }
                }
                lzslot.isBaiduCmLoad = true;

                // 加载还没有加载的同步代码位
                lzslot.rsyncRun();
            });
        }
    },
    loadScript: function(url, callback) {
        var script = document.createElement('script');
        if (script.readyState) {
            script.onreadystatechange = function() {
                if (script.readyState == 'loaded' || script.readyState == 'complete') {
                    script.onreadystatechange = null;
                    callback();
                }
            };
        } else {
            script.onload = function(){
                callback();
            };
        }

        script.src = url;
        var heads = document.getElementsByTagName('head');  
        if (heads.length)  
            heads[0].appendChild(script);  
        else  
            document.documentElement.appendChild(script);
    }
};
lzslot.init();
$(document).ready(function() {
    lzslot.asyncRun();
});

// dynamic
// generate time: 2019-11-29 17:27:35
lzslot.preloadSlots = {"1":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/je\/static\/tgdk_g\/common\/nd.js\"><\/script>","2":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/source\/n\/common\/ix_k_h\/okfh.js\"><\/script>","3":"<script src='\/\/js.xz6d.com\/m401695.js'><\/script>","6":"<script type=\"text\/javascript\">\n        var cpro_id = \"u2860906\";\n        \n<\/script>\n<script type=\"text\/javascript\" src=\"\/\/cpro.baidustatic.com\/cpro\/ui\/c.js\"><\/script>","7":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/m\/hwjpi\/production\/q\/openjs\/i\/resource\/n.js\"><\/script>","8":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/common\/mh\/static\/w\/common\/jij\/resource\/qw_g.js\"><\/script>","9":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/common\/l-g\/source\/vi-fpm\/production\/oh.js\"><\/script>","13":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/g_bq_da_kk\/production\/kj.js\"><\/script>","15":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/site\/hc\/common\/re\/bllu\/production\/e.js\"><\/script>","16":"<script src='\/\/js.xz6d.com\/m401695.js'><\/script>","18":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/site\/r\/static\/mb-ol-o\/common\/bui.js\"><\/script>","20":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/up_er\/q_r\/source\/exo.js\"><\/script>","28":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/common\/hcre\/b\/source\/i\/openjs\/z\/resource\/uz.js\"><\/script>","29":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/site\/d-yn\/production\/ax\/openjs\/eun-q.js\"><\/script>","33":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/je\/static\/tgdk_g\/common\/nd.js\"><\/script>","34":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/je\/static\/tgdk_g\/common\/nd.js\"><\/script>","35":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/up_er\/q_r\/source\/exo.js\"><\/script>","36":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/site\/d-yn\/production\/ax\/openjs\/eun-q.js\"><\/script>","37":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/je\/static\/tgdk_g\/common\/nd.js\"><\/script>","41":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/common\/mhw-jpn\/common\/j\/resource\/q\/g.js\"><\/script>","42":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/nix_kh\/k\/a\/common\/ok.js\"><\/script>","45":"<script type=\"text\/javascript\" src=\"\/\/shili.wanyx.com\/qu3a1ecf99f0cbf038db0d7882adf766a142e3d31d23ac32ed12.js\"><\/script>","46":"<script type=\"text\/javascript\" src=\"\/\/shili.wanyx.com\/va3a1ecf99f0cbf03ddb0d7882adf766a142e3d31d23ac32ed12.js\"><\/script>","47":"<script type=\"text\/javascript\" charset=\"utf-8\" src=\"http:\/\/d.xtianqi.com.cn\/game\/newyx\/2.js\"><\/script>","51":"<script type=\"text\/javascript\" charset=\"utf-8\" src=\"http:\/\/d.xtianqi.com.cn\/game\/kuai8\/2.js\"><\/script>","52":"<script type=\"text\/javascript\" charset=\"utf-8\" src=\"http:\/\/d.xtianqi.com.cn\/game\/wanyx\/2.js\"><\/script>","53":"<script type=\"text\/javascript\">\n                var cpro_id = \"u2858963\";\n                <\/script>\n                <script type=\"text\/javascript\" src=\"\/\/cpro.baidustatic.com\/cpro\/ui\/c.js\"><\/script>","61":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/source\/je\/resource\/t\/common\/gd-bb-an.js\"><\/script>","68":"<script src='\/\/js.xz6d.com\/m401695.js'><\/script>","69":"<script type=\"text\/javascript\" charset=\"utf-8\" src=\"http:\/\/d.xtianqi.com.cn\/game\/kuai8\/2.js\"><\/script>","86":"<script type=\"text\/javascript\" src=\"\/\/lishi.wanyx.com\/production\/g_bq_da_kk\/production\/kj.js\"><\/script>","87":"<script src='\/\/js.xz6d.com\/m401695.js'><\/script>","107":"<script type=\"text\/javascript\">\n        var cpro_id = \"u1376561\";\n        \n<\/script>\n<script type=\"text\/javascript\" src=\"\/\/cpro.baidustatic.com\/cpro\/ui\/c.js\"><\/script>","128":"<script type=\"text\/javascript\">\n        var cpro_id = \"u2860906\";\n        \n<\/script>\n<script type=\"text\/javascript\" src=\"\/\/cpro.baidustatic.com\/cpro\/ui\/c.js\"><\/script>"};